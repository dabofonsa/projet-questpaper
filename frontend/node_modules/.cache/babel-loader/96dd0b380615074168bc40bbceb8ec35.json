{"ast":null,"code":"import _objectSpread from\"/Users/carnelmegbleto/Desktop/questpaper/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/carnelmegbleto/Desktop/questpaper/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carnelmegbleto/Desktop/questpaper/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carnelmegbleto/Desktop/questpaper/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Upload=function Upload(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),donneeform=_useState2[0],setDonneeForm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),filename=_useState4[0],setFilename=_useState4[1];//file data to be appended\nvar _useState5=useState(),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];//level and speciality data\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),specialite=_useState8[0],setSpecialite=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),level=_useState10[0],setLevel=_useState10[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var onSubmit=function onSubmit(data){return setDonneeForm(data);};var sendData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!formData){_context.next=3;break;}_context.next=3;return axios.post(\"http://localhost:5000/api/user/upload\",formData).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function sendData(_x){return _ref.apply(this,arguments);};}();useEffect(function(){try{if(donneeform){setFile(donneeform.file[0]);setLevel(donneeform.year);setSpecialite(donneeform.specialite);var formData=new FormData();formData.append(\"name\",filename);formData.append(\"subject\",file);formData.append(\"year\",level);formData.append(\"domaine\",specialite);sendData(formData);}}catch(error){}},[onSubmit]);var getFile=function getFile(e){setFilename(e.target.files[0].name);setFile(e.target.files[0]);};return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen p-4 lg:w-1/2 mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\" h-full p-2 flex flex-col justify-evenly\"//onSubmit={submitForm}\n,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"level\",children:\"Niveau d'\\xE9tude:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"year\")),{},{className:\"p-2  bg-gray-500 text-white\",id:\"year\",name:\"year\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",selected:true,disabled:true,hidden:true,children:\"Renseignez une ann\\xE9e d'\\xE9tude\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"License 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"License 2\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"License 3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Master 1\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"Master 2\"})]}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Specialite\",children:\"Specialite:\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"specialite\")),{},{className:\"p-2 bg-gray-500 text-white\",id:\"specialite\",name:\"specialite\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"none\",selected:true,disabled:true,hidden:true,children:\"Renseignez une specialit\\xE9\"}),/*#__PURE__*/_jsx(\"option\",{value:\"anglais\",children:\"Anglais\"}),/*#__PURE__*/_jsx(\"option\",{value:\"informatique\",children:\"Informatique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"biologie\",children:\"Biologie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"commerce\",children:\"commerce\"}),/*#__PURE__*/_jsx(\"option\",{value:\"droit\",children:\"Droit\"})]}))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-2/6 flex flex-col \",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"p-2 shadow-lg cursor-pointer h-5/6 text-white border-2 border-dotted border-gray-300\",type:\"file\",accept:\".pdf\",name:\"subject\"},register(\"file\")),{},{onChange:getFile})),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"filelabel\",children:filename})]}),/*#__PURE__*/_jsx(\"input\",{className:\"p-3 cursor-pointer  m-3 hover:bg-gray-400\",type:\"submit\",value:\"Upload\"})]})});};export default Upload;","map":{"version":3,"sources":["/Users/carnelmegbleto/Desktop/questpaper/frontend/src/Pages/Upload.js"],"names":["axios","React","useState","useEffect","useForm","Upload","donneeform","setDonneeForm","filename","setFilename","file","setFile","specialite","setSpecialite","level","setLevel","register","handleSubmit","onSubmit","data","sendData","formData","post","then","res","console","log","catch","err","year","FormData","append","error","getFile","e","target","files","name"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nconst Upload = () => {\n  const [donneeform, setDonneeForm] = useState([]);\n\n  const [filename, setFilename] = useState();\n\n  //file data to be appended\n  const [file, setFile] = useState();\n\n  //level and speciality data\n\n  const [specialite, setSpecialite] = useState();\n  const [level, setLevel] = useState();\n\n  const { register, handleSubmit } = useForm();\n  const onSubmit = (data) => setDonneeForm(data);\n\n  const sendData = async (formData) => {\n\n    if(formData){\n        await axios\n           .post(\"http://localhost:5000/api/user/upload\", formData)\n           .then((res) => console.log(res))\n           .catch((err) => console.log(err));\n    }\n  };\n\n  useEffect(() => {\n    try {\n      if (donneeform) {\n        setFile(donneeform.file[0]);\n        setLevel(donneeform.year);\n        setSpecialite(donneeform.specialite);\n\n        const formData = new FormData();\n\n        formData.append(\"name\", filename);\n        formData.append(\"subject\", file);\n        formData.append(\"year\", level);\n        formData.append(\"domaine\", specialite);\n\n        sendData(formData);\n      }\n    } catch (error) {}\n  }, [onSubmit]);\n\n  const getFile = (e) => {\n    setFilename(e.target.files[0].name);\n\n    setFile(e.target.files[0]);\n  };\n\n  \n\n  return (\n    <div className=\"h-screen p-4 lg:w-1/2 mx-auto\">\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\" h-full p-2 flex flex-col justify-evenly\"\n        //onSubmit={submitForm}\n      >\n        <div className=\"flex flex-col \">\n          <label htmlFor=\"level\">Niveau d'étude:</label>\n          <select\n            {...register(\"year\")}\n            className=\"p-2  bg-gray-500 text-white\"\n            id=\"year\"\n            name=\"year\"\n          >\n            <option value=\"none\" selected disabled hidden>\n              Renseignez une année d'étude\n            </option>\n            <option value=\"1\">License 1</option>\n            <option value=\"2\">License 2</option>\n            <option value=\"3\">License 3</option>\n            <option value=\"4\">Master 1</option>\n            <option value=\"5\">Master 2</option>\n          </select>\n        </div>\n\n        <div className=\"flex flex-col \">\n          <label htmlFor=\"Specialite\">Specialite:</label>\n          <select\n            {...register(\"specialite\")}\n            className=\"p-2 bg-gray-500 text-white\"\n            id=\"specialite\"\n            name=\"specialite\"\n          >\n            <option value=\"none\" selected disabled hidden>\n              Renseignez une specialité\n            </option>\n            <option value=\"anglais\">Anglais</option>\n            <option value=\"informatique\">Informatique</option>\n            <option value=\"biologie\">Biologie</option>\n            <option value=\"commerce\">commerce</option>\n            <option value=\"droit\">Droit</option>\n          </select>\n        </div>\n\n        <div className=\"relative h-2/6 flex flex-col \">\n          <input\n            className=\"p-2 shadow-lg cursor-pointer h-5/6 text-white border-2 border-dotted border-gray-300\"\n            type=\"file\"\n            accept=\".pdf\"\n            name=\"subject\"\n            {...register(\"file\")}\n            onChange={getFile}\n          />\n          <label htmlFor=\"filelabel\">{filename}</label>\n        </div>\n\n        <input\n          className=\"p-3 cursor-pointer  m-3 hover:bg-gray-400\"\n          type=\"submit\"\n          value=\"Upload\"\n        />\n      </form>\n    </div>\n  );\n};\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}